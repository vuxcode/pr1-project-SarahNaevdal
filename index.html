<!--This is an interactive book where the user can choose how the story will continue and end-->

<head>
<style>
body {font-family: sans-serif; text-align: center;}  
</style><br><br>
<!--Ask the user for their name-->
Type your name here:
<!--Create a text box-->
<input id="username" type="text">
<!--Add a button for the user to click to confirm the input-->
<button onclick="getInput()">Enter</button>
</head>

<!--Create a headline-->
<h1 id="hello"></h1>
<!--Create a text element, that can be updated, to output the text of the book-->
<h2 id="demo"></h2><br><br>  
<!--Create two buttons for the book that can be updated-->
<!--Give the buttons different id:s-->
<!--Add the same function to both buttons-->
<button id="leftButton" onclick="getPage('left')">Left</button>
<button id="rightButton" onclick="getPage('right')">Right</button>

<script>

//Save the users input (name) in a variable whe the user push 'Enter'.
var playerName = "";

//Create a variable for each page. 
var emptyPage = "";
var welcomePage = "Welcome to.."
let page1 = "It is a beautiful day in Adventure Bay but Ryder doesn't feel very well today.<br>He caught a fever and he feel dissy trying to stand up.<br>He reaches out for his puppy-pad and calls his good friend -XXXX-.<br>Off course -XXXX- will help! I'll be right there says -XXXX-!<br><br>Puppies waiting / Tower empty";
var page21 = "-XXXX- arrives at the tower where all the puppies are already waiting.<br><br>Get urgent alarm / Get alarm";
var page22 = "When -XXXX- arrives the tower is empty.<br>-XXXX- gets inside to see if there are any alarms. ";  
var page31 = "-XXXX- tells Paw Patrol that he/she is in charge today.<br>But -XXXX- does not even get to finish the sentence before there is an alarm!<br>There is a fire on a party-boat with lots of passengers.<br>Who will -XXXX- send?<br><br>Zuma & Marshall / Rubble & Skye";
var page32 = "-Text- page 3.2";
var page33 = "-Text- page 3.3";
var page34 = "-Text- page 3.4";
var page41 = "Zuma and Marshall heads to the lake where the boat is at.<br>Zuma shoots out life buoys to the passengers and as soon they get<br>everyone on land Marshall uses his water cannons to put out the fire.<br>Great job pups! Says -XXXX- ";
var page42 = "-Text- page 4.2";
var page43 = "-Text- page 4.3";
var page44 = "-Text- page 4.4";
var page45 = "-Text- page 4.5";
var page46 = "-Text- page 4.6";
var page47 = "-Text- page 4.7";
var page48 = "-Text- page 4.8";

//Create a variable and connect it to the Hello element
var helloName = document.getElementById("hello"); 

//Create a variable and connect it to the Demo element. 
var output = document.getElementById("demo");

//Create a variable to find the first button element on the screen.
var left = document.getElementById("leftButton");

//Create a variable to find the second button element on the screen.
var right = document.getElementById("rightButton");

//Find the textbox and connect it to a variable.
var readersName = document.getElementById("username");

//Create an array for all pages of the book.
var allPages = [emptyPage, page1, page21, page22, page31, page32, page33, page34, page41, page42, page43, page44, page45, page46, page47, page48];
//Lenght: 16

//Create an global array
var choices = [];

//Create arrays for all different possible sequences to ger thru the book.
var line1 = [emptyPage, page1, page21, page31, page41];
var line2 = [emptyPage, page1, page21, page31, page42];
var line3 = [emptyPage, page1, page21, page32, page43];
var line4 = [emptyPage, page1, page21, page32, page44];
var line5 = [emptyPage, page1, page22, page33, page45];
var line6 = [emptyPage, page1, page22, page33, page46];
var line7 = [emptyPage, page1, page22, page34, page47];
var line8 = [emptyPage, page1, page22, page34, page48];
//Lenght: 5.

//
var currentLine = line1; 

//Create arrays for the sequences of the buttons.
var seq1 = [right, right, right, right];
var seq2 = [right, right, right, left];
var seq3 = [right, right, left, right];
var seq4 = [right, right, left, left];
var seq5 = [right, left, right, right];
var seq6 = [right, left, right, left];
var seq7 = [right, left, left, right];
var seq8 = [right, left, left, left];
//Lenght: 4. 

//Create a variable to access one index in the array.
var index = 0;

//Test!
//for(var index = 0; index < line1.length; index++) {
    //Output the current step.
    //console.log(line1[index]);
//}

//Show the current page number in the console.
        console.log("Empty page")

//Add a function to get the users input (name).
    function getInput() {
        //Save the users input. 
        playerName = readersName.value.trim();
        //Output the users name on the screen.
        helloName.innerText = "Hello " + playerName + "!";
        //Clear the text box when pushing "Enter". 
        readersName.value = "";
        //Output the first page on the screen.
        output.innerHTML = welcomePage; 
        //Reset index to zero. 
        index = 0; 
        //Show the input in the console. 
        console.log("Username: " + playerName);
         //Show the chosen page number in the console.
        console.log("Welcome page")
        }

//Add a function to control the text of the book.
       // function getText() {

        //}
//Get the text from the textbox.
        //let inputText = document.getElementById("username").value;
       
        //Show the name in the text of the book.
        //document.getElementById("demo").innerHTML = current;       

//Add a function for line 1.
    function getPage(choice) {
        //Hide the 'Hello message'. 
        helloName.innerText = "";
        //Save the users choise.
        choices.push(choice);
        //Increase the index if in the middle of the book. 
        if(index < 4) {
        index++;
        showPage();
        }

        //When the user have made four choices, chose the way.
        if (choices.length === 4) { 
        //Compare the choices with sequences.
        if (arraysEqual(choices, ["right", "right", "right", "right"])) currentLine = line1;
        else if (arraysEqual(choices, ["right", "right", "right", "left"])) currentLine = line2;
        else if (arraysEqual(choices, ["right", "right", "left", "right"])) currentLine = line3;
        else if (arraysEqual(choices, ["right", "right", "left", "left"])) currentLine = line4;
        else if (arraysEqual(choices, ["right", "left", "right", "right"])) currentLine = line5;
        else if (arraysEqual(choices, ["right", "left", "right", "left"])) currentLine = line6;
        else if (arraysEqual(choices, ["right", "left", "left", "right"])) currentLine = line7;
        else if (arraysEqual(choices, ["right", "left", "left", "left"])) currentLine = line8;

        index = 0; //Start a new story from the beginning.
        
        //Show the current page number in the console.
        //console.log(xx);
        //line1.innerText
        //if(index < line1.length - 1) {
        //If the index can be updated then increase the index number by one.
        //index++;
        //};
        //Show the current step using another function.
        showPage();
        }
    }

    function arraysEqual(a, b) {
      return a.length === b.length && a.every((val, index) => val === b[index])
    }

//Add a function to show the next page if click on the left button.
   // function getStep(xx) {
//console.log(xx)
        //Add the click event to the button to run the getStep function.
      //  if(left) {
        //Show the chosen page on the screen.
      //  output.innerText = page[index];
        //Show the chosen page number in the console.
       // console.log("page 2.1");
       // };
   // }
    
 //Add a function to show the next page if click on the right button.
  //  function getPage(yy) {
   // console.log(yy)
    //Add the click event to the button to run the getStep function.
    //if(right) {
    //index++
    //Show page 2.2 on the screen.
    //output.innerText = page[index];
    //Show page in 2.2 in the console.
    //console.log("page 2.2");
    //};
    //if(right && left) {
    //show page 3.2 on the screen 
    //output.innerText = page32;
    //Show the page in the console.
    //console.log("page 3.2");
    //};
   // }    
//Make a function to update the screen.

function showPage() {
    //Output the current page.
    //(output.innerHTML = line1[index];)
    let currentText = currentLine[index];
    //Replace 'reader' with the input from the textbox.
    //let current = inputText
    currentText = currentText.replace(/-XXXX-/g, playerName);

    output.innerHTML = currentText;
  }

//Output the empty page using the function to show the current page.
showPage();

</script>